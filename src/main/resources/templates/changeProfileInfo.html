<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Change Profile Information</title>
    <style>
        .transparent {
            opacity: 0.2;
            pointer-events: none;
        }
    </style>
    <script>
        function toggleConfirmPassword() {
            var password = document.getElementById('password').value;
            var confirmPasswordField = document.getElementById('confirmPassword');
            var confirmPasswordLabel = document.getElementById('confirmPasswordLabel');

            if (password) {
                confirmPasswordField.classList.remove('transparent');
                confirmPasswordLabel.classList.remove('transparent');
            } else {
                confirmPasswordField.classList.add('transparent');
                confirmPasswordLabel.classList.add('transparent');
            }
        }
    </script>
</head>
<body>
<h1>Change Profile Information</h1>

<form action="#" th:action="@{/changeProfileInfo}" method="post">
    <label for="username">New Username:</label>
    <input type="text" id="username" name="username" th:value="${user.username}" required />
    <br/>

    <label for="password">New Password:</label>
    <input type="password" id="password" name="password" oninput="toggleConfirmPassword()" />
    <br/>

    <label for="confirmPassword" id="confirmPasswordLabel" class="transparent">Confirm New Password:</label>
    <input type="password" id="confirmPassword" name="confirmPassword" class="transparent" />
    <br/>

    <small style="color: #555;">
        Password must meet the following criteria:
        <ul>
            <li>Minimum 8 characters</li>
            <li>At least one uppercase letter</li>
            <li>At least one number</li>
            <li>At least one special character (e.g., !, @, #)</li>
        </ul>
    </small>

    <div th:if="${error}" style="color: red;">
        <p th:text="${error}"></p>
    </div>

    <button type="submit">Update Profile</button>
</form>
</body>
</html>
